{"version":3,"sources":["webpack:///./src/components/admin/document/List.vue?498a","webpack:///src/components/admin/document/List.vue","webpack:///./src/components/admin/document/List.vue?0823","webpack:///./src/components/admin/document/List.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","doc","show","_e","scopedSlots","_u","key","fn","scope","on","$event","download","row","staticClass","_v","slot","dialogTableVisible","currentPage","total","handleCurrentChange","ref","Realupload","fileList","upload","staticRenderFns","inject","data","search","methods","$refs","submit","fd","append","file","sessionStorage","getItem","console","log","JSON","stringify","api","axios","$message","showClose","message","type","a","href","documentID","click","current","getData","created","component"],"mappings":"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","file":"js/chunk-2d0cf653.fc5366bd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-col',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.doc}},[(_vm.show = false)?_c('el-table-column',{attrs:{\"label\":\"资料ID\",\"prop\":\"documentID\"}}):_vm._e(),_c('el-table-column',{attrs:{\"label\":\"资料名称\",\"prop\":\"docuName\"}}),_c('el-table-column',{attrs:{\"label\":\"资料类型\",\"prop\":\"docuType\"}}),_c('el-table-column',{attrs:{\"label\":\"资料大小\",\"prop\":\"fileSize\"}}),_c('el-table-column',{attrs:{\"label\":\"上传人\",\"prop\":\"staffName\"}}),_c('el-table-column',{attrs:{\"label\":\"所属部门\",\"prop\":\"depName\"}}),_c('el-table-column',{attrs:{\"label\":\"上传时间\",\"prop\":\"createTime\"}}),_c('el-table-column',{attrs:{\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"round\":\"\"},on:{\"click\":function($event){return _vm.download(scope.row)}}},[_c('i',{staticClass:\"el-icon-download\"}),_vm._v(\"下载 \")])]}}])},[_c('template',{slot:\"header\"},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogTableVisible = true}},slot:\"trigger\"},[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\"上传资料 \")])],1)],2)],1)],1)],1),_c('el-row',[_c('el-col',[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-size\":5,\"layout\":\"total, prev, pager, next\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"上传面板\",\"visible\":_vm.dialogTableVisible},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"\",\"before-upload\":_vm.Realupload,\"limit\":1,\"file-list\":_vm.fileList,\"auto-upload\":false}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取文件\")]),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":_vm.upload}},[_vm._v(\"点击上传\")]),_c('div',{attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"检查选择的文件，如若无误点击上传：\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col>\r\n        <el-table :data=\"doc\" style=\"width: 100%\">\r\n          <el-table-column label=\"资料ID\" prop=\"documentID\" v-if=\"show = false\"></el-table-column>\r\n          <el-table-column label=\"资料名称\" prop=\"docuName\"></el-table-column>\r\n          <el-table-column label=\"资料类型\" prop=\"docuType\"></el-table-column>\r\n          <el-table-column label=\"资料大小\" prop=\"fileSize\"></el-table-column>\r\n          <el-table-column label=\"上传人\" prop=\"staffName\"></el-table-column>\r\n          <el-table-column label=\"所属部门\" prop=\"depName\"></el-table-column>\r\n          <el-table-column label=\"上传时间\" prop=\"createTime\"></el-table-column>\r\n          <el-table-column align=\"right\">\r\n            <template slot=\"header\">\r\n              <el-button\r\n                slot=\"trigger\"\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"dialogTableVisible = true\"\r\n              >\r\n                <i class=\"el-icon-upload\" />上传资料\r\n              </el-button>\r\n            </template>\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"small\" type=\"success\" @click=\"download(scope.row)\" round>\r\n                <i class=\"el-icon-download\" />下载\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row>\r\n      <el-col>\r\n        <el-pagination\r\n          background\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"currentPage\"\r\n          :page-size=\"5\"\r\n          layout=\"total, prev, pager, next\"\r\n          :total=\"total\"\r\n        ></el-pagination>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 上传列表 -->\r\n    <el-dialog title=\"上传面板\" :visible.sync=\"dialogTableVisible\">\r\n      <el-upload\r\n        ref=\"upload\"\r\n        action\r\n        :before-upload=\"Realupload\"\r\n        :limit=\"1\"\r\n        :file-list=\"fileList\"\r\n        :auto-upload=\"false\"\r\n      >\r\n        <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\r\n        <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"upload\">点击上传</el-button>\r\n        <div slot=\"tip\">检查选择的文件，如若无误点击上传：</div>\r\n      </el-upload>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      dialogTableVisible: false,\r\n      currentPage: 1,\r\n      total: 0,\r\n      fileList: [],\r\n      doc: [],\r\n      search: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    upload() {\r\n      this.$refs.upload.submit();\r\n    },\r\n    Realupload(file) {\r\n      let fd = new FormData();\r\n      fd.append(\"file\", file);\r\n      fd.append(\"staffID\", sessionStorage.getItem(\"staffID\"));\r\n      fd.append(\"depID\", sessionStorage.getItem(\"depID\"));\r\n      console.log(JSON.stringify(\"上传表单：\" + fd));\r\n      var api = \"http://localhost:8888/document/add\";\r\n      this.axios\r\n        .post(api, fd)\r\n        .then(response => {\r\n          console.log(response);\r\n          this.$message({\r\n            message: \"上传成功\",\r\n            type: \"success\",\r\n            center: true\r\n          });\r\n          this.reload();\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          this.$message({\r\n            message: \"上传失败，请检查网络或联系管理员\",\r\n            type: \"error\",\r\n            center: true\r\n          });\r\n        });\r\n      return true;\r\n    },\r\n    download(row) {\r\n      console.log(\"get对象：\" + JSON.stringify(row));\r\n      this.$message({\r\n        showClose: true,\r\n        message: \"资料准备下载\",\r\n        type: \"success\"\r\n      });\r\n      let a = document.createElement(\"a\");\r\n      a.href = \"http://localhost:8888/document/download/\" + row.documentID;\r\n      a.click();\r\n    },\r\n    handleCurrentChange(current) {\r\n      this.currentPage = current;\r\n      var api = \"http://localhost:8888/document/\" + current + \"/\" + 5;\r\n      this.axios\r\n        .get(api)\r\n        .then(response => {\r\n          console.log(\"分页响应对象：\" + response);\r\n          this.doc = response.data.records;\r\n          this.total = response.data.total;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getData() {\r\n      var api =\r\n        \"http://localhost:8888/document/\" +\r\n        this.$route.params.current +\r\n        \"/\" +\r\n        this.$route.params.size;\r\n      this.axios\r\n        .get(api)\r\n        .then(response => {\r\n          console.log(response);\r\n          this.doc = response.data.records;\r\n          this.total = response.data.total;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  },\r\n  created() {\r\n    this.getData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=08cff75a&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08cff75a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
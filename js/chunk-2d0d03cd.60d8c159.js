(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d03cd"],{"66b9":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.doc}},[(t.show=!1)?a("el-table-column",{attrs:{label:"资料ID",prop:"documentID"}}):t._e(),a("el-table-column",{attrs:{label:"资料名称",prop:"docuName"}}),a("el-table-column",{attrs:{label:"资料类型",prop:"docuType"}}),a("el-table-column",{attrs:{label:"资料大小",prop:"fileSize"}}),a("el-table-column",{attrs:{label:"上传人",prop:"staffName"}}),a("el-table-column",{attrs:{label:"所属部门",prop:"depName"}}),a("el-table-column",{attrs:{label:"上传时间",prop:"createTime"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"success",round:""},on:{click:function(a){return t.download(e.row)}}},[a("i",{staticClass:"el-icon-download"}),t._v("下载 ")])]}}])},[a("template",{slot:"header"},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}},slot:"trigger"},[a("i",{staticClass:"el-icon-upload"}),t._v("上传资料 ")])],1)],2)],1)],1)],1),a("el-row",[a("el-col",[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":5,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1),a("el-dialog",{attrs:{title:"上传面板",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-upload",{ref:"upload",attrs:{action:"","before-upload":t.Realupload,limit:1,"file-list":t.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.upload}},[t._v("点击上传")]),a("div",{attrs:{slot:"tip"},slot:"tip"},[t._v("检查选择的文件，如若无误点击上传：")])],1)],1)],1)},l=[],n={inject:["reload"],data:function(){return{dialogTableVisible:!1,currentPage:1,total:0,fileList:[],doc:[]}},methods:{upload:function(){this.$refs.upload.submit()},Realupload:function(t){var e=this,a=new FormData;a.append("file",t),a.append("staffID",sessionStorage.getItem("staffID")),a.append("depID",sessionStorage.getItem("depID")),console.log(JSON.stringify("上传表单："+a));var o="http://localhost:8888/document/add";return this.axios.post(o,a).then((function(t){console.log(t),e.$message({message:"上传成功",type:"success",center:!0}),e.reload()})).catch((function(t){console.log(t),e.$message({message:"上传失败，请检查网络或联系管理员",type:"error",center:!0})})),!0},download:function(t){console.log("get对象："+JSON.stringify(t)),this.$message({showClose:!0,message:"资料准备下载",type:"success"});var e=document.createElement("a");e.href="http://localhost:8888/document/download/"+t.documentID,e.click()},handleCurrentChange:function(t){var e=this;this.currentPage=t;var a="http://localhost:8888/document/"+t+"/5";this.axios.get(a).then((function(t){console.log("分页响应对象："+t),e.doc=t.data.records,e.total=t.data.total})).catch((function(t){console.log(t)}))},getData:function(){var t=this,e="http://localhost:8888/document/"+this.$route.params.current+"/"+this.$route.params.size;this.axios.get(e).then((function(e){console.log(e),t.doc=e.data.records,t.total=e.data.total})).catch((function(t){console.log(t)}))}},created:function(){this.getData()}},s=n,r=a("2877"),c=Object(r["a"])(s,o,l,!1,null,"0587c1ee",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0d03cd.60d8c159.js.map